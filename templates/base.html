<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <title>April</title>

    <meta name="description" content="an Ambient/Post-Rock band from San Francisco. Free music and hugs inside.">

    <meta property="og:title" content="April" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.listentoapril.com" />
    <meta property="og:image" content="http://jeffmicklos.s3.amazonaws.com/april/web/april.jpg" />

    {% assets filters="cssmin", output="gen/style.css", "css/reset.css", "css/base.css" %}
      <link rel="stylesheet" href="{{ ASSET_URL }}">
    {% endassets %}

  </head>
  <body>

    <div class="footer">
      <ul>
        <li>
          <a href="https://soundcloud.com/listentoapril" rel="me" title="Listen to April the band on SoundCloud">SoundCloud</a>
        </li>
        <li>
          <a href="http://instagram.com/listentoapril" rel="me" title="April the band on Instagram">Instagram</a>
        </li>
      </ul>
    </div>
     
    <div class="container">

      <div class="loading-screen"></div>

      <div class="content" itemscope itemtype="http://schema.org/MusicGroup">

        <h1 itemprop="name">April</h1>

        <div itemprop="track" itemscope itemtype="http://schema.org/MusicRecording">
          <meta itemprop="duration" content="PT4M37S" />
          <meta itemprop="description" content="A cover of the amazing song by Mogwai" />
          <meta itemprop="keywords" content="post-rock, ambient, shoegaze, mogwai, cover, postrock" />
          <meta itemprop="url" content="http://jeffmicklos.s3.amazonaws.com/april/April%20-%20I%20Know%20You%20Are%20But%20What%20Am%20I.mp3" />

          <span itemprop="name">I Know You Are But What Am I?</span>

          <iframe width="640" height="65" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/117261269&amp;color=333031&amp;auto_play=false&amp;show_artwork=false&amp;show_playcount=false&amp;theme_color=f1f1f1">
          </iframe>

          <a itemprop="audio" href="http://jeffmicklos.s3.amazonaws.com/april/April%20-%20I%20Know%20You%20Are%20But%20What%20Am%20I.mp3" class="download-link" title="Free Download of I Know You Are But What Am I">Download mp3 for Free</a>
        </div>

      </div>
      
      <video audio="muted" autoplay loop>
        <!--<source src="//dns4jlfurg7hp.cloudfront.net/videos/petra.ogv" type="video/ogg; codecs=&quot;theora, vorbis&quot;">-->
        <source src="//jeffmicklos.s3.amazonaws.com/april/web/bg_ipod.mp4" type="video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;">
      </video>

      {% block content %}
      {% endblock %}

    </div>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script>

    <script>

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-45175550-1', 'listentoapril.com');
      ga('send', 'pageview');


      April = {

        init: function() {

          this.w = $(window);
          this.video = $('video');
          this.footer = $('.footer');
          this.container = $('.container');
          this.contentContainer = $('.content');
          this.loadingScreen = $('.loading-screen');

          this.arrangeElements();
          this.w.on('resize', $.proxy(this.arrangeElements, this));
          $('.download-link').on('click', $.proxy(this.onDownload, this));

          // Once the video is ready to play, fade out the loading screen
          if(this.video.get(0).buffered.length) {
            this.hideLoadingScreen();
          } else {
            this.video.on('canplay', $.proxy(this.hideLoadingScreen, this));
          }

        },

        arrangeElements: function() {
          this.fitVideo();
          this.verticalCenter(this.contentContainer);
          this.horizontalCenter(this.contentContainer);
          this.container.css('height', this.w.height());
          this.footer.css('top', this.w.height());
        },

        hideLoadingScreen: function() {
          var self = this;
          this.loadingScreen.animate({
            opacity: 0
          }, 1000, 'ease', function() {
            self.loadingScreen.remove();
          });
        },

        onDownload: function() {
          ga('send', 'event', 'Music', 'Download', 'I Know You Are But What Am I');
        },

        fitVideo: function() {
          var videoW = 960;
          var videoH = 544;
          var windowW = this.w.width();
          var windowH = this.w.height();

          var videoRatio = videoW / videoH;
          var windowRatio = windowW / windowH;

          if(windowRatio < videoRatio) {
            this.video.css({
              height: '100%',
              width: 'auto'
            });
          } else {
            this.video.css({
              height: 'auto',
              width: '100%',
            });
          }
        },

        verticalCenter: function(element) {
          var position = element.css('position') == 'relative' ? 'relative' : null;
          element.css({
            position: position || 'absolute',
            top: '50%',
            marginTop: -(element.height() / 2)
          });
        },

        horizontalCenter: function(element) {
          var position = element.css('position') == 'relative' ? 'relative' : null;
          element.css({
            position:  position || 'absolute',
            left: '50%',
            marginLeft: -(element.width() / 2)
          });
        }

      };

      April.init();

    </script>
     
  </body>
</html>